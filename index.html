<!-- ✅ 完整可執行版本（已修正 @apply、Flex JSON、Video hero 規格） -->
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>LINEOA 插件管理平台</title>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://unpkg.com/lucide@latest"></script>

<style>
body{font-family:"Noto Sans TC",sans-serif;background:#f4f7f6}
.ratio-btn{padding:4px 10px;font-size:12px;border:1px solid #e5e7eb;border-radius:6px;cursor:pointer;background:#fff}
.ratio-btn-active{border-color:#00B900;background:#eafff1;color:#00B900;font-weight:700}
.preview-window{width:300px;height:560px;background:#0f0f10;border-radius:30px;border:10px solid #333}
.flex-bubble{background:#fff;border-radius:12px;overflow:hidden;width:250px;margin:auto}
</style>
</head>

<body>
<div id="app" class="flex h-screen">

<!-- 側邊欄 -->
<aside class="w-[260px] bg-[#1e2124] text-gray-300 p-4">
  <h1 class="text-white font-bold mb-6">LINEOA PLUG</h1>
  <button class="block mb-3" @click="tab='article'">文章型 Flex</button>
  <button class="block mb-3" @click="tab='video'">影片名片</button>
  <button class="block mb-3" @click="tab='ecom'">電商插件</button>
</aside>

<!-- 主畫面 -->
<main class="flex-1 bg-white p-6 overflow-hidden">
  <h2 class="text-xl font-bold mb-4">{{ title }}</h2>

  <!-- 編輯器 -->
  <div v-if="tab==='article'">
    <input v-model="article.title" class="border p-2 w-full mb-2" placeholder="標題">
    <textarea v-model="article.text" class="border p-2 w-full mb-2" rows="4"></textarea>
    <input v-model="article.image" class="border p-2 w-full mb-4" placeholder="圖片 URL">

    <pre class="bg-black text-green-400 p-4 text-xs rounded">
{{ JSON.stringify(articleFlex, null, 2) }}
    </pre>
  </div>

  <div v-if="tab==='video'">
    <input v-model="video.name" class="border p-2 w-full mb-2" placeholder="姓名">
    <input v-model="video.videoUrl" class="border p-2 w-full mb-4" placeholder="影片 mp4">

    <pre class="bg-black text-green-400 p-4 text-xs rounded">
{{ JSON.stringify(videoFlex, null, 2) }}
    </pre>
  </div>

  <div v-if="tab==='ecom'">
    <input v-model="ecom.title" class="border p-2 w-full mb-2" placeholder="商品名稱">
    <input v-model="ecom.image" class="border p-2 w-full mb-4" placeholder="商品圖片">

    <pre class="bg-black text-green-400 p-4 text-xs rounded">
{{ JSON.stringify(ecomFlex, null, 2) }}
    </pre>
  </div>
</main>

<!-- 預覽 -->
<aside class="w-[360px] bg-gray-100 flex items-center justify-center">
  <div class="preview-window p-4">
    <div class="flex-bubble p-3 text-center">
      <div class="font-bold">{{ previewTitle }}</div>
      <div class="text-xs mt-2">{{ previewText }}</div>
    </div>
  </div>
</aside>

</div>

<script>
const { createApp, computed, ref } = Vue;

createApp({
  setup(){
    const tab = ref('article');

    const article = ref({
      title:'康立 AI 元年',
      text:'從一張電子名片開始，打造你的 AI 商務分身',
      image:'https://aiwe.cc/wp-content/uploads/2026/01/6446d860dbbfe540e9e2cbab5f98f1e3-2.png'
    });

    const video = ref({
      name:'TONY',
      videoUrl:'https://example.com/video.mp4'
    });

    const ecom = ref({
      title:'商品 A',
      image:'https://lihi.cc/mwMvo'
    });

    const articleFlex = computed(()=>({
      type:'bubble',
      hero:{type:'image',url:article.value.image,aspectRatio:'16:9',aspectMode:'cover'},
      body:{type:'box',layout:'vertical',contents:[
        {type:'text',text:article.value.title,weight:'bold',size:'lg',wrap:true},
        {type:'text',text:article.value.text,wrap:true}
      ]}
    }));

    const videoFlex = computed(()=>({
      type:'bubble',
      hero:{
        type:'video',
        url:video.value.videoUrl,
        aspectRatio:'16:9',
        altContent:{type:'image',url:'https://lihi.cc/mwMvo'}
      },
      body:{type:'box',layout:'vertical',contents:[
        {type:'text',text:video.value.name,weight:'bold'}
      ]}
    }));

    const ecomFlex = computed(()=>({
      type:'bubble',
      body:{type:'box',layout:'vertical',contents:[
        {type:'image',url:ecom.value.image,aspectRatio:'1:1',size:'full'},
        {type:'text',text:ecom.value.title,weight:'bold'}
      ]}
    }));

    return {
      tab,
      title: computed(()=>({article:'文章型 Flex',video:'影片名片',ecom:'電商插件'}[tab.value])),
      article, video, ecom,
      articleFlex, videoFlex, ecomFlex,
      previewTitle: computed(()=>article.value.title),
      previewText: computed(()=>article.value.text)
    };
  }
}).mount('#app');
</script>

</body>
</html>
